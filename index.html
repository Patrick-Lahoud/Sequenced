<html>
<head>
    <title>sequenced</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loading-screen">
        <div class="loading-content">
            <div class="glitch-container">
                <h1 class="glitch-text" aria-label="sequenced">
                    <span aria-hidden="true">s</span>
                    <span aria-hidden="true">e</span>
                    <span aria-hidden="true">q</span>
                    <span aria-hidden="true">u</span>
                    <span aria-hidden="true">e</span>
                    <span aria-hidden="true">n</span>
                    <span aria-hidden="true">c</span>
                    <span aria-hidden="true">e</span>
                    <span aria-hidden="true">d</span>
                </h1>
            </div>
        </div>
    </div>
    <div id="scaling-wrapper">
        <div class="game-container">
            <div class="logo-container">
                <div class="logo-icon">
                    <div class="face-container">
                        <div class="eye left-eye"></div>
                        <div class="eye right-eye"></div>
                        <div class="mouth"></div>
                    </div>
                    <div class="speech-bubble" id="speech-bubble"></div>
                </div>
                <div class="logo-text">sequenced</div>
            </div>
            <div class="game-info-top">
                <div id="number-odds">Next number range: 1-?</div>
                <div id="new-number-box"></div>
                <div id="messages"></div>
            </div>
            <div id="sequence-container"></div>
            
            <div class="progress-info">
                <div id="current-level">Level: 1</div>
                <div id="current-round">Round: 1/6</div>
                <div id="total-fails">Fails: 0</div>
            </div>

            <div class="button-container">
                <button id="next-level-btn">Next Level</button>
                <button id="restart-btn">Reset</button>
            </div>
        </div>
    </div>
    
    <button id="settings-btn">âš™ï¸</button>
    <button id="how-to-play-btn">?</button>

    <div id="settings-popup">
        <div class="popup-content">
            <button id="close-settings-popup">X</button>
            <h2>Settings</h2>
            
            <div class="settings-tabs">
                <button class="tab-btn active" data-tab="general">General</button>
                <button class="tab-btn" data-tab="accessibility">Accessibility</button>
            </div>

            <div class="settings-scroll-content">
                <!-- General Settings Tab -->
                <div id="general-settings" class="tab-content active">
                    <div class="settings-section">
                        <h3><span class="popup-icon">ğŸ”Š</span> Sound</h3>
                        <div class="setting-item">
                            <label for="sfx-volume">Effects Volume</label>
                            <div class="slider-container">
                                <span>0</span>
                                <input type="range" id="sfx-volume" min="0" max="1" step="0.05" value="1">
                                <span>100</span>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3><span class="popup-icon">ğŸ”„</span> Game Data</h3>
                        <div class="setting-item">
                            <label>Reset Progress</label>
                            <button id="reset-progress-btn">Reset All Progress</button>
                        </div>
                        <p class="setting-note">This will reset your current level back to 1 and your total fails to 0. This action cannot be undone.</p>
                    </div>
                </div>

                <!-- Accessibility Settings Tab -->
                <div id="accessibility-settings" class="tab-content">
                    <div class="settings-section">
                        <h3><span class="popup-icon">ğŸ‘ï¸</span> Visuals</h3>
                        <div class="setting-item">
                            <label for="high-contrast-toggle">High Contrast Mode</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="high-contrast-toggle">
                                <span class="slider round"></span>
                            </label>
                        </div>
                         <p class="setting-note">Increases text contrast and removes some glow effects for better readability.</p>
                    </div>
                    <div class="settings-section">
                        <h3><span class="popup-icon">ğŸƒâ€â™‚ï¸</span> Motion</h3>
                        <div class="setting-item">
                            <label for="reduce-motion-toggle">Reduce Motion</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="reduce-motion-toggle">
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <p class="setting-note">Reduces pulsing, shaking, and other animations.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="how-to-play-popup">
        <div class="popup-content">
            <button id="close-popup">X</button>
            <h2>How to Play</h2>
            
            <div class="popup-scroll-content">
                <div class="popup-section">
                    <h3><span class="popup-icon">ğŸ’¡</span> The Goal</h3>
                    <p>Your main objective is to place the new number into the sequence so that all numbers remain in <span class="highlight">ascending order</span> (from smallest to largest).</p>
                </div>

                <div class="popup-section">
                    <h3><span class="popup-icon">ğŸ‘‡</span> How to Play</h3>
                    <ul>
                        <li><span class="popup-icon-small">ğŸ”¢</span> Each round, you'll receive a random number.</li>
                        <li><span class="popup-icon-small">ğŸ–±ï¸</span> Click on any empty gap in the sequence to insert the number.</li>
                        <li><span class="popup-icon-small">âœ¨</span> If your placement keeps the sequence ordered, you continue!</li>
                    </ul>
                </div>

                <div class="popup-section">
                    <h3><span class="popup-icon">âš ï¸</span> Important Rules</h3>
                    <ul>
                        <li><span class="popup-icon-small">ğŸš«</span> One mistake (an out-of-order sequence) means Game Over!</li>
                        <li><span class="popup-icon-small">ğŸ†</span> Survive all rounds in a level to complete it and advance to a harder one.</li>
                    </ul>
                </div>
                
                <p class="tip"><span class="popup-icon">ğŸ§ </span> **Tip:** Think strategically! Visualize where the number fits best before clicking. There's no time limit!</p>
            </div>
        </div>
    </div>
    
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    <script type="module" src="game.js"></script>
</body>
</html>